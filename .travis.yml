language: c
sudo: false

install:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install md5sha1sum; fi
  - source devtools/travis-ci/install_miniconda.sh

before_script:
    - conda create -q -y --name testenv python=$CONDA_PY
    - source activate testenv
    - conda install -c bioconda -c R cnvkit -y -q  # Just installing this for the dependencies, will remove immediately
    - conda remove cnvkit -y -q
    - python setup.py install  # Install the actual version
    - cd test/
    # For codecov.io
    - pip install codecov

script:
    - coverage run test_cnvlib.py

after_success:
    - coverage report
    - codecov

os:
  - osx
  - linux

env:
  - CONDA_PY=2.7 PYSAM=0.8.5
  - CONDA_PY=2.7 PYSAM=0.9.0
  - CONDA_PY=3.5 PYSAM=0.8.5
  - CONDA_PY=3.5 PYSAM=0.9.0
